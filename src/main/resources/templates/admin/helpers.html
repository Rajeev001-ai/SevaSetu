<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Admin | Manage Helpers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <style>
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            color: #fff;
            min-height: 100vh;
            font-family: 'Poppins', sans-serif;
        }

        /* Sidebar */
        .sidebar {
            background: #1b263b;
            min-height: 100vh;
            padding: 25px 15px;
        }

        .sidebar a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            color: #cfd8dc;
            text-decoration: none;
            font-weight: 500;
            transition: 0.3s;
        }

        .sidebar a:hover,
        .sidebar a.active {
            background: #0f3460;
            color: #00d4ff;
        }

        .sidebar i {
            margin-right: 10px;
        }

        /* Cards */
        .card-box {
            background: rgba(255,255,255,0.06);
            backdrop-filter: blur(12px);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 12px 30px rgba(0,0,0,0.4);
        }

        .table th {
            color: #9bdcff;
        }

        .status-badge {
            padding: 5px 14px;
            border-radius: 50px;
            font-size: 13px;
            font-weight: 600;
        }

        .approved {
            background: #e6fffa;
            color: #0f766e;
        }

        .pending {
            background: #fff7ed;
            color: #c2410c;
        }

        .blocked {
            background: #fee2e2;
            color: #b91c1c;
        }

        .btn-action {
            border-radius: 30px;
            padding: 6px 14px;
            font-size: 13px;
        }

        @media(max-width:768px){
            .sidebar {
                min-height: auto;
            }
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar navbar-dark bg-dark px-4 d-flex justify-content-between">
    <span class="navbar-brand fw-bold">Admin Panel</span>
    <a href="/logout" class="btn btn-outline-danger btn-sm">Logout</a>
</nav>

<div class="container-fluid">
    <div class="row">

        <!-- SIDEBAR -->
        <div class="col-md-2 sidebar">
          <a href="/admin/dashboard"><i class="fa fa-home"></i> Dashboard</a>
          <a href="/admin/users"><i class="fa fa-users"></i> Users</a>
          <a href="/admin/helpers" class="active"><i class="fa fa-user-shield"></i> Helpers</a>
          <a href="/admin/services"><i class="fa fa-tools"></i> Services</a>
          <a href="/admin/bookings-status"> <i class="fa fa-list-check"></i> Booking Status </a>
          <a href="/admin/bookings-assign"><i class="fa fa-user-check"></i> Assign Bookings</a>
          <a href="/admin/earnings"><i class="fa fa-wallet"></i> Earnings</a>
        </div>

        <!-- MAIN CONTENT -->
        <div class="col-md-10 p-4">

            <!-- HEADER -->
            <div class="card-box mb-4">
                <h3 class="mb-2">
                    <i class="fa fa-user-shield me-2"></i>
                    Helper Management
                </h3>
                <p class="text-light" style="line-height:1.8;">
                    This section allows administrators to review, approve, or block service helpers.
                    Helpers must be verified before accepting bookings to ensure service quality,
                    safety, and platform trust. Use action buttons wisely to maintain smooth operations.
                </p>
            </div>

            <!-- TABLE -->
            <div class="card-box">
                <h5 class="mb-3">
                    <i class="fa fa-list me-2"></i>
                    Registered Helpers
                </h5>

                <div class="table-responsive">
                    <table class="table table-dark table-hover align-middle">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>City</th>
                                <th>Service</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr th:each="helper, i : ${helpers}">
                                <td th:text="${i.count}">1</td>
                                <td th:text="${helper.name}">Rahul</td>
                                <td th:text="${helper.email}">rahul@mail.com</td>
                                <td th:text="${helper.phone}">rahul@mail.com</td>
                                <td th:text="${helper.city}">Delhi</td>
                                <td th:text="${helper.service}">Plumbing</td>

                                <td>
                                    <span class="status-badge"
                                          th:classappend="
                                          ${helper.enabled} ? 'approved' : 'blocked'"
                                          th:text="${helper.enabled ? 'APPROVED' : 'BLOCKED'}">
                                    </span>
                                </td>

                                <td class="d-flex gap-2 flex-wrap">

                                    <form th:if="${!helper.enabled}"
                                          th:action="@{/admin/helper/approve/{id}(id=${helper.id})}"
                                          method="post">
                                        <button class="btn btn-success btn-action">
                                            <i class="fa fa-check"></i> Approve
                                        </button>
                                    </form>

                                    <form th:if="${helper.enabled}"
                                          th:action="@{/admin/helper/block/{id}(id=${helper.id})}"
                                          method="post">
                                        <button class="btn btn-danger btn-action">
                                            <i class="fa fa-ban"></i> Block
                                        </button>
                                    </form>



                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <p class="text-center text-muted mt-3"
                   th:if="${#lists.isEmpty(helpers)}">
                    No helpers registered yet.
                </p>
            </div>

            <!-- INFO -->
            <div class="card-box mt-4">
                <h5>
                    <i class="fa fa-circle-info me-2"></i>
                    Admin Guidelines
                </h5>
                <p class="text-light" style="line-height:1.8;">
                    Approve only verified helpers with correct service details. Blocking a helper
                    will immediately prevent them from receiving new bookings. Regularly audit
                    helper activity to maintain high service standards.
                </p>
            </div>

        </div>
    </div>
</div>

</body>
</html>

